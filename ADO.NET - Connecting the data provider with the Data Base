
using System;
using System.Data.SqlClient;




namespace PracticeCSharp
{


   
    class Program 

    {
        static string ConnectionString = "SERVER = localhost; Database = ContactsDB; User id = sa; Password = sa123456;";

        static void Main(string[] args)
        {
            SqlConnection Connection = new SqlConnection(ConnectionString);
            
            string query = "SELECT * FROM CONTACTS join Countries on Countries.CountryID = Contacts.CountryID";
            
            try { 
                
                Connection.Open(); // opens the data base connection
                
                SqlCommand Command = new SqlCommand(query, Connection); // Command class used to execute commands 

                SqlDataReader reader = Command.ExecuteReader(); // data reader offers a read only mode for data base retsult set

                while (reader.Read()) {
                    
                    int Id = (int)reader["ContactID"]; // it returns object data type which can be converted to any data type
                    string FirstName = (string)reader["FirstName"];
                    string LastName = (string)reader["LastName"];
                    string Email = (string)reader["Email"];
                    string Phone = (string)reader["Phone"];
                    string CountryName = (string)reader["CountryName"];
                    
                    Console.WriteLine($"ID : {Id}");
                    Console.WriteLine("---------------------------------------");
                    Console.WriteLine($"FirstName : {FirstName}");
                    Console.WriteLine($"LastName : {LastName}");
                    Console.WriteLine($"Email : {Email}");
                    Console.WriteLine($"Phone : {Phone}");
                    Console.WriteLine($"Country : {CountryName}");
                    Console.WriteLine("---------------------------------------");
                    Console.Write("\n");
                
                }

                reader.Close();
                Connection.Close();
                // it is essential to close connections because you have a limited number of connections , also each connection consumes computer resources



            }
            catch (Exception ex)
            {
                Console.WriteLine($"ERROR {ex.Message}");
            }


            
        }
    }


}





